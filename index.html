<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriFlow - Smart Farm Management</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <!-- In the head section of index.html, add these: -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics-compat.js"></script>
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="logo-container">
                <i class="fas fa-tractor logo-icon"></i>
                <h1>AgriFlow</h1>
                <span class="beta-badge">BETA</span>
            </div>
            <p class="tagline">Smart Management for Modern Farmers</p>
        </header>

        <div class="weather-widget">
            <div class="weather-info">
                <i class="fas fa-sun weather-icon sunny"></i>
                <div>
                    <h3>Weather Today</h3>
                    <p>Sunny, 28°C • Perfect for farm activities</p>
                </div>
            </div>
            <button class="refresh-weather"><i class="fas fa-sync-alt"></i></button>
        </div>

        <div class="profitability-banner" id="profitabilityBanner">
            <i class="fas fa-chart-line"></i>
            <span>Loading profitability analysis...</span>
        </div>

        <main class="dashboard-grid">
            <div class="farm-card dairy" onclick="navigateTo('dairy.html')">
                <div class="farm-icon">
                    <i class="fas fa-cow"></i>
                </div>
                <h2>Dairy Farm</h2>
                <div class="farm-stats">
                    <div class="stat">
                        <span class="stat-label">Monthly Profit</span>
                        <span class="stat-value" id="dairyProfit">KES 0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Milk Production</span>
                        <span class="stat-value" id="dairyMilk">0 L</span>
                    </div>
                </div>
                <div class="farm-status">
                    <span class="status-indicator inactive"></span>
                    <span>No active production</span>
                </div>
            </div>

            <div class="farm-card poultry" onclick="navigateTo('poultry.html')">
                <div class="farm-icon">
                    <i class="fas fa-egg"></i>
                </div>
                <h2>Poultry Farm</h2>
                <div class="farm-stats">
                    <div class="stat">
                        <span class="stat-label">Monthly Profit</span>
                        <span class="stat-value" id="poultryProfit">KES 0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Egg Production</span>
                        <span class="stat-value" id="poultryEggs">0 Eggs</span>
                    </div>
                </div>
                <div class="farm-status">
                    <span class="status-indicator inactive"></span>
                    <span>No active production</span>
                </div>
            </div>

            <div class="action-card report-card" onclick="navigateTo('master-report.html')">
                <i class="fas fa-chart-bar card-icon"></i>
                <h3>Master Report</h3>
                <p>Comprehensive analysis of all livestock performance</p>
                <button class="btn-generate">Generate Report</button>
            </div>

            <div class="action-card backup-card" onclick="backupData()">
                <i class="fas fa-cloud-upload-alt card-icon"></i>
                <h3>Backup Data</h3>
                <p>Last backup: <span id="lastBackup">Never</span></p>
                <button class="btn-backup"><i class="fas fa-save"></i> Backup Now</button>
            </div>

            <div class="action-card restore-card" onclick="restoreData()">
                <i class="fas fa-cloud-download-alt card-icon"></i>
                <h3>Restore Data</h3>
                <p>Recover your farm data from cloud</p>
                <button class="btn-restore"><i class="fas fa-history"></i> Restore</button>
            </div>

            <div class="action-card insights-card">
                <i class="fas fa-lightbulb card-icon"></i>
                <h3>Smart Insights</h3>
                <p id="dailyInsight">Add your first production record to get insights</p>
                <div class="insight-tags">
                    <span class="tag">Efficiency</span>
                    <span class="tag">Profit</span>
                    <span class="tag">Health</span>
                </div>
            </div>
        </main>

        <div class="quick-actions">
            <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
            <div class="action-buttons">
                <button class="action-btn" onclick="addProduction('dairy')">
                    <i class="fas fa-plus"></i> Add Milk Production
                </button>
                <button class="action-btn" onclick="addProduction('poultry')">
                    <i class="fas fa-plus"></i> Add Egg Count
                </button>
                <button class="action-btn" onclick="navigateTo('settings.html')">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>

        <footer class="main-footer">
            <p>© 2025 AgriFlow | <span id="currentDate"></span> | <span id="version">v2.0</span></p>
            <div class="footer-links">
                <a href="#" onclick="showHelp()">Help</a>
                <a href="#" onclick="showAbout()">About</a>
                <a href="#" onclick="exportData()">Export Data</a>
            </div>
        </footer>
    </div>

    <div class="notification" id="notification"></div>

    <script src="js/app.js"></script>
    <script src="js/firebase.js"></script>
    <script>
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateDate();
            loadFarmData();
            calculateProfitability();
            checkLoginStatus();
            
            // Register service worker for PWA
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('js/service-worker.js');
            }
        });
    </script>
</body>

</html>
