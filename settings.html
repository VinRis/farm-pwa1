<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - AgriFlow</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="logo-container">
                <i class="fas fa-cog logo-icon"></i>
                <h1>Settings</h1>
            </div>
            <a href="index.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back to Home
            </a>
        </header>

        <div class="settings-container">
            <!-- Theme Settings -->
            <div class="settings-section">
                <h2><i class="fas fa-palette"></i> Appearance</h2>
                <div class="setting-item">
                    <div>
                        <h3>Dark Mode</h3>
                        <p>Toggle between light and dark theme</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Farm Information -->
            <div class="settings-section">
                <h2><i class="fas fa-farm"></i> Farm Information</h2>
                
                <div class="form-group">
                    <label for="farmName">Farm Name</label>
                    <input type="text" id="farmName" placeholder="Enter farm name">
                </div>
                
                <div class="form-group">
                    <label for="managerName">Manager's Name</label>
                    <input type="text" id="managerName" placeholder="Enter manager name">
                </div>
                
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" placeholder="Enter farm location">
                </div>
                
                <div class="form-group">
                    <label for="currency">Currency</label>
                    <select id="currency">
                        <option value="KES">Kenyan Shilling (KES)</option>
                        <option value="USD">US Dollar (USD)</option>
                        <option value="EUR">Euro (EUR)</option>
                        <option value="GBP">British Pound (GBP)</option>
                    </select>
                </div>
            </div>

            <!-- Account Settings -->
            <div class="settings-section">
                <h2><i class="fas fa-user-circle"></i> Account</h2>
                <div class="setting-item">
                    <div>
                        <h3>Cloud Sync</h3>
                        <p>Login to backup data to cloud</p>
                    </div>
                    <button id="loginBtn" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </button>
                </div>
                
                <div class="setting-item">
                    <div>
                        <h3>Data Management</h3>
                        <p>Backup and restore your farm data</p>
                    </div>
                    <div class="btn-group">
                        <button onclick="backupData()" class="btn-secondary">
                            <i class="fas fa-cloud-upload-alt"></i> Backup Now
                        </button>
                        <button onclick="restoreData()" class="btn-secondary">
                            <i class="fas fa-cloud-download-alt"></i> Restore
                        </button>
                    </div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="settings-section">
                <h2><i class="fas fa-bell"></i> Notifications</h2>
                <div class="setting-item">
                    <div>
                        <h3>Daily Reminders</h3>
                        <p>Get reminded to record production</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="dailyReminders" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="setting-item">
                    <div>
                        <h3>Health Alerts</h3>
                        <p>Get alerts for animal health issues</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="healthAlerts" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Export/Import -->
            <div class="settings-section">
                <h2><i class="fas fa-database"></i> Data Management</h2>
                <div class="btn-group-vertical">
                    <button onclick="exportData()" class="btn-secondary">
                        <i class="fas fa-file-export"></i> Export All Data
                    </button>
                    <button onclick="importData()" class="btn-secondary">
                        <i class="fas fa-file-import"></i> Import Data
                    </button>
                    <button onclick="resetData()" class="btn-danger">
                        <i class="fas fa-trash-alt"></i> Reset All Data
                    </button>
                </div>
            </div>

            <!-- About -->
            <div class="settings-section">
                <h2><i class="fas fa-info-circle"></i> About AgriFlow</h2>
                <div class="about-content">
                    <p><strong>Version:</strong> 2.0.0</p>
                    <p><strong>Last Updated:</strong> December 2025</p>
                    <p><strong>Developer:</strong> AgriFlow Team</p>
                    <p><strong>Support:</strong> support@agriflow.com</p>
                </div>
            </div>

            <!-- Save Button -->
            <div class="save-section">
                <button id="saveSettings" class="btn-save">
                    <i class="fas fa-save"></i> Save All Settings
                </button>
            </div>
        </div>

        <footer class="main-footer">
            <p>Â© 2025 AgriFlow | Smart Farm Management System</p>
        </footer>
    </div>

    <div class="notification" id="notification"></div>

    <script src="js/app.js"></script>
    <script src="js/firebase.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load current settings
            document.getElementById('farmName').value = app.settings.farmName;
            document.getElementById('managerName').value = app.settings.managerName;
            document.getElementById('location').value = app.settings.location;
            document.getElementById('currency').value = app.settings.currency;
            document.getElementById('themeToggle').checked = app.settings.darkMode;
            
            // Set up login button
            document.getElementById('loginBtn').addEventListener('click', function() {
                if (typeof firebase !== 'undefined') {
                    // Show login modal or redirect to login page
                    showLoginModal();
                } else {
                    app.showNotification('Firebase not configured', 'error');
                }
            });
        });
        
        function showLoginModal() {
            const email = prompt('Enter your email:');
            if (email) {
                const password = prompt('Enter your password:');
                if (password) {
                    firebase.auth().signInWithEmailAndPassword(email, password)
                        .then(() => app.showNotification('Login successful'))
                        .catch(error => app.showNotification(error.message, 'error'));
                }
            }
        }
        
        function resetData() {
            if (confirm('Are you sure? This will delete ALL farm data.')) {
                localStorage.removeItem('agriflowData');
                localStorage.removeItem('agriflowSettings');
                location.reload();
            }
        }
    </script>
</body>
</html>